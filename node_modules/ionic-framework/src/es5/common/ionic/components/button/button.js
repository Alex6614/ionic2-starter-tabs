"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _angular2Angular2 = require('angular2/angular2');

var _configConfig = require('../../config/config');

/**
 * TODO
 */
var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") return Reflect.decorate(decorators, target, key, desc);
    switch (arguments.length) {
        case 2:
            return decorators.reduceRight(function (o, d) {
                return d && d(o) || o;
            }, target);
        case 3:
            return decorators.reduceRight(function (o, d) {
                return (d && d(target, key), void 0);
            }, void 0);
        case 4:
            return decorators.reduceRight(function (o, d) {
                return d && d(target, key, o) || o;
            }, desc);
    }
};
var __metadata = undefined && undefined.__metadata || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var Button = function Button(config, elementRef) {
    _classCallCheck(this, Button);

    var element = elementRef.nativeElement;
    if (config.setting('hoverCSS') === false) {
        element.classList.add('disable-hover');
    }
    if (element.hasAttribute('ion-item')) {
        // no need to put on these icon classes for an ion-item
        return;
    }
    // figure out if and where the icon lives in the button
    var childNodes = element.childNodes;
    var childNode = undefined;
    var nodes = [];
    for (var i = 0, l = childNodes.length; i < l; i++) {
        childNode = childNodes[i];
        if (childNode.nodeType === 3) {
            // text node
            if (childNode.textContent.trim() !== '') {
                nodes.push(TEXT);
            }
        } else if (childNode.nodeType === 1) {
            if (childNode.nodeName === 'ICON') {
                // icon element node
                nodes.push(ICON);
            } else {
                // element other than an <icon>
                nodes.push(TEXT);
            }
        }
    }
    if (nodes.length > 1) {
        if (nodes[0] === ICON && nodes[1] === TEXT) {
            element.classList.add('icon-left');
        } else if (nodes[0] === TEXT && nodes[1] === ICON) {
            element.classList.add('icon-right');
        }
    } else if (nodes.length === 1 && nodes[0] === ICON) {
        element.classList.add('icon-only');
    }
};
exports.Button = Button;
exports.Button = Button = __decorate([(0, _angular2Angular2.Directive)({
    selector: 'button,[button]'
}), __metadata('design:paramtypes', [typeof _configConfig.IonicConfig !== 'undefined' && _configConfig.IonicConfig || Object, typeof _angular2Angular2.ElementRef !== 'undefined' && _angular2Angular2.ElementRef || Object])], Button);
var TEXT = 1;
var ICON = 2;